# Вопросы для собеседования Go сеньора

## Основы языка Go

### 1. Что такое goroutine и чем отличается от потока операционной системы?
- Goroutine - это легковесный поток выполнения в Go, управляемый средой выполнения Go (runtime).
- Горутины мультиплексируются на меньшее количество потоков ОС, что делает их более эффективными.
- Горутины имеют меньший стек по умолчанию (обычно 2KB) и могут динамически расти.
- Создание goroutine дешевле, чем создание потока ОС.

### 2. Как работает планировщик Go?
- Go использует M:N планировщик, который мультиплексирует M goroutine на N потоков ОС.
- Планировщик основан на модели "work-stealing" для балансировки нагрузки.
- Использует кооперативную и вытесняющую многозадачность.

### 3. Что такое каналы и какие виды каналов существуют?
- Каналы - это механизм коммуникации между goroutine.
- Типы каналов:
  - Небуферизированные (синхронные) каналы
  - Буферизированные каналы
  - Каналы направления (send-only, receive-only)

### 4. Что такое select и как он используется?
- Select позволяет ждать одновременно несколько операций с каналами.
- Может использоваться для таймаутов, неблокирующей коммуникации и балансировки нагрузки.

### 5. Как работает garbage collector в Go?
- Go использует конкурентный три-цветный алгоритм пометки и очистки.
- GC работает параллельно с приложением, минимизируя паузы.
- Можно настраивать параметры GC через GOGC переменную окружения.

## Продвинутые концепции

### 6. Что такое context и как он используется?
- Context используется для передачи метаданных, сигнала отмены и таймаутов в цепочке вызовов.
- Основные функции: WithCancel, WithTimeout, WithDeadline, WithValue.
- Важен для управления жизненным циклом запросов в веб-приложениях.

### 7. Как реализованы интерфейсы в Go?
- Интерфейсы в Go реализуются неявно.
- Интерфейс - это набор сигнатур методов.
- Тип реализует интерфейс, если он имеет все методы интерфейса.

### 8. Что такое пустой интерфейс (interface{})?
- interface{} - это интерфейс, который не имеет методов.
- Любой тип реализует interface{}.
- Используется для хранения значений любого типа, но требует type assertion для использования.

### 9. Как работает defer и в каком порядке выполняются defer'ы?
- Defer откладывает выполнение функции до возврата окружающей функции.
- Defer'ы выполняются в порядке LIFO (последний вошел - первый вышел).

### 10. Что такое panic и recover?
- Panic вызывает аварийное завершение текущей goroutine.
- Recover позволяет перехватить panic и восстановить нормальное выполнение.
- Recover работает только в defer'ах.

## Паттерны проектирования и архитектура

### 11. Как реализовать dependency injection в Go?
- Через интерфейсы и фабричные функции.
- Использование DI контейнеров (вручную созданных или сторонних библиотек).
- Внедрение зависимостей через конструкторы.

### 12. Какие паттерны middleware вы знаете?
- Middleware для HTTP обработчиков (логирование, аутентификация, CORS).
- Цепочка обработчиков (chain of responsibility).
- Декоратор для добавления функциональности.

### 13. Как организовать архитектуру приложения в Go?
- Чистая архитектура (Clean Architecture).
- Разделение на слои: delivery, business logic, repository.
- Использование интерфейсов для инверсии зависимостей.

### 14. Как реализовать паттерн worker pool?
- Создание пула goroutine для обработки задач из канала.
- Балансировка нагрузки между воркерами.
- Управление количеством воркеров и graceful shutdown.

### 15. Как реализовать singleton в Go?
- С использованием sync.Once для ленивой инициализации.
- Потокобезопасная реализация.

## Синхронизация и конкурентность

### 16. В чем разница между Mutex и RWMutex?
- Mutex - взаимное исключение, только один поток может владеть блокировкой.
- RWMutex - позволяет множественным читателям или одному писателю.

### 17. Когда использовать atomic операции?
- Для простых операций с примитивными типами данных.
- Когда нужна максимальная производительность.
- Для счетчиков, флагов и других простых случаев.

### 18. Что такое WaitGroup и как его использовать?
- WaitGroup ожидает завершения группы goroutine.
- Используется Add, Done и Wait методы.

### 19. Как обнаружить и предотвратить race conditions?
- Использование go run -race.
- Правильная синхронизация (mutex, channels, atomic).
- Минимизация общих данных.

### 20. Что такое deadlock и как его избежать?
- Deadlock - ситуация, когда две или более goroutine блокируют друг друга.
- Избежать можно через упорядочивание блокировок, таймауты, использование каналов.

## Профилирование и оптимизация

### 21. Как профилировать Go приложения?
- Использование pprof (встроенного профилировщика).
- Типы профилей: CPU, memory, block, mutex.
- Визуализация через веб-интерфейс или командную строку.

### 22. Как измерить производительность кода?
- Использование бенчмарков (go test -bench).
- Сравнение результатов с помощью benchstat.
- Профилирование бенчмарков.

### 23. Как оптимизировать использование памяти?
- Минимизация аллокаций.
- Использование sync.Pool для переиспользования объектов.
- Профилирование heap.

### 24. Какие инструменты для отладки вы знаете?
- Delve (dlv) - дебаггер для Go.
- GDB - универсальный дебаггер.
- Логирование и трассировка.

### 25. Как настроить сборку для production?
- Использование тегов сборки.
- Оптимизация сборки (go build -ldflags).
- Настройка сборки под разные архитектуры.

## Системный дизайн

### 26. Как спроектировать масштабируемое API?
- Использование паттерна API Gateway.
- Балансировка нагрузки.
- Кэширование на разных уровнях.

### 27. Как реализовать rate limiting?
- Токен бакет алгоритм.
- Leaky bucket алгоритм.
- Использование middleware.

### 28. Как организовать кэширование?
- In-memory кэширование (sync.Map).
- Распределенное кэширование (Redis, Memcached).
- Стратегии инвалидации.

### 29. Как обеспечить отказоустойчивость?
- Circuit breaker паттерн.
- Graceful shutdown.
- Health checks.

### 30. Как реализовать распределенную трассировку?
- Использование OpenTelemetry.
- Передача trace context между сервисами.
- Интеграция с системами мониторинга.

## Базы данных и ORM

### 31. Как правильно работать с database/sql?
- Использование пула соединений.
- Обработка транзакций.
- Подготовка запросов.

### 32. Какие проблемы могут быть с ORM?
- N+1 проблема.
- Сложные запросы.
- Потеря контроля над SQL.

### 33. Как реализовать connection pooling?
- Настройка MaxOpenConns, MaxIdleConns.
- Мониторинг использования соединений.
- Таймауты соединений.

### 34. Как обеспечить целостность данных?
- Использование транзакций.
- Constraints на уровне базы данных.
- Валидация на уровне приложения.

### 35. Как оптимизировать запросы к базе данных?
- Использование индексов.
- Анализ плана выполнения запросов.
- Пагинация и ограничение результатов.

## Тестирование

### 36. Какие виды тестов вы знаете?
- Модульные тесты (unit tests).
- Интеграционные тесты.
- E2E тесты.

### 37. Как тестировать код с зависимостями?
- Использование интерфейсов и моков.
- Внедрение тестовых зависимостей.
- Тестирование с помощью testify или других библиотек.

### 38. Как тестировать конкурентный код?
- Использование race detector.
- Тестирование с различными уровнями параллелизма.
- Проверка корректности синхронизации.

### 39. Как реализовать table-driven тесты?
- Использование срезов структур с тестовыми данными.
- Цикл по тестовым данным.
- Подробные сообщения об ошибках.

### 40. Как тестировать HTTP обработчики?
- Использование httptest.NewRecorder и httptest.NewRequest.
- Тестирование middleware.
- Проверка статусов, заголовков и тела ответа.

## Практические задачи

### 41. Реализуйте паттерн worker pool
```go
// Пример реализации worker pool
```

### 42. Реализуйте rate limiter
```go
// Пример реализации rate limiter
```

### 43. Реализуйте circuit breaker
```go
// Пример реализации circuit breaker
```

### 44. Реализуйте простой in-memory cache
```go
// Пример реализации in-memory cache
```

### 45. Реализуйте middleware для логирования
```go
// Пример реализации logging middleware
```

## Мягкие навыки и опыт

### 46. Расскажите о своем опыте с Go
- Какие проекты реализовали?
- С какими трудностями сталкивались?
- Какие решения применяли?

### 47. Как вы подходите к решению сложных задач?
- Разбиение на подзадачи.
- Исследование и анализ.
- Прототипирование и итерации.

### 48. Как вы обеспечиваете качество кода?
- Code review.
- Тестирование.
- Статический анализ.

### 49. Как вы работаете в команде?
- Коммуникация.
- Совместная разработка.
- Передача знаний.

### 50. Как вы следите за новыми технологиями?
- Чтение документации.
- Участие в сообществе.
- Эксперименты с новыми инструментами.